webpackJsonp([1],{"9KKc":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),o=i("c/Tr"),s=i.n(o),l={name:"vue-drag-select",props:{value:{type:Array,default:function(){return[]}},minHeight:{type:Number,required:!0}},data:function(){return{mouseDown:!1,startPoint:null,endPoint:null,lastEndPoint:null,scrollIng:!1,autoScrollTimer:null,scrollDirection:!0,scrollSpeed:20,selectionBox:{left:0,top:0,width:0,height:0},selectionBoxStyling:{left:"0px",top:"0px",width:"0px",height:"0px"},controlKeyDown:!1,shiftKeyDown:!1}},computed:{currentValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{boxAutoScroll:function(){var t=this;t.scrollIng=!0,t.autoScrollTimer=setInterval(function(){t.mouseDown?t.scrollDirection?t.$el.scrollTop+t.$el.offsetHeight>=t.minHeight-20?(clearInterval(t.autoScrollTimer),t.scrollIng=!1):t.$el.scrollTop+=t.scrollSpeed:t.$el.scrollTop<=0?(clearInterval(t.autoScrollTimer),t.scrollIng=!1):t.$el.scrollTop-=t.scrollSpeed:clearInterval(t.autoScrollTimer)},16)},boxScrollFn:function(t){this.computeLastEndPoint()},computeLastEndPoint:function(){if(!this.mouseDown||!this.startPoint||!this.endPoint)return{};var t=this.$el.getBoundingClientRect();this.lastEndPoint={x:this.endPoint.x-t.left,y:this.endPoint.y-t.top+this.$el.scrollTop};var e=Math.min(this.startPoint.x,this.lastEndPoint.x),i=Math.min(this.startPoint.y,this.lastEndPoint.y),n=Math.abs(this.startPoint.x-this.lastEndPoint.x),o=Math.abs(this.startPoint.y-this.lastEndPoint.y);this.selectionBox={left:e,top:i,width:n,height:o},this.selectionBoxStyling={left:e+"px",top:i+"px",width:n+"px",height:o+"px"}},onMouseDown:function(t){if(("select-wrap"===t.target.className||"box-item"===t.target.className)&&2!==t.button){var e=this.$el.getBoundingClientRect();this.mouseDown=!0,this.startPoint={x:t.pageX-e.left,y:t.pageY-e.top+this.$el.scrollTop},window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}},onMouseMove:function(t){if(this.mouseDown){var e=this.$el.getBoundingClientRect(),i=e.top+e.height;t.pageY>i-50&&(this.scrollDirection=!0),t.pageY<e.top+50&&(this.scrollDirection=!1),t.pageY>e.top+50&&t.pageY<i-50?(clearInterval(this.autoScrollTimer),this.scrollIng=!1):(this.scrollIng||this.boxAutoScroll(),this.scrollSpeed=10),(t.pageY<e.top||t.pageY>i)&&(this.scrollSpeed=20),this.endPoint={x:t.pageX,y:t.pageY},this.scrollIng||this.computeLastEndPoint()}},onMouseUp:function(t){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.mouseDown=!1,this.computeSelectedItems(),this.startPoint=null,this.endPoint=null,this.lastEndPoint=null,this.selectionBoxStyling={left:"0px",top:"0px",width:"0px",height:"0px"}},computeSelectedItems:function(){var t=this;this.controlKeyDown||(this.currentValue=[]),this.$nextTick(function(){s()(t.$refs.selectWrap.children).forEach(function(e){var i=e.offsetTop,n=e.offsetLeft,o=e.clientWidth,s=e.clientHeight;t.selectionBox.left<=n+o&&t.selectionBox.left+t.selectionBox.width>=n&&t.selectionBox.top<=i+s&&t.selectionBox.top+t.selectionBox.height>=i&&(-1!==t.currentValue.indexOf(e.id)?t.currentValue.splice(t.currentValue.indexOf(e.id),1):t.currentValue.push(e.id))}),t.selectionBox={left:0,top:0,width:0,height:0}})},clickSelect:function(t,e){var i=this;if(this.shiftKeyDown){var n=[],o=this,l=s()(o.$refs.selectWrap.children),r=o.currentValue.length;return l.forEach(function(t,e){-1!==o.currentValue.indexOf(t.id)&&n.push(e)}),o.currentValue=[],void o.$nextTick(function(){if(0===r)l.forEach(function(t,i){i<=e&&o.currentValue.push(t.id)});else if(1===r)n[0]>e?l.forEach(function(t,i){i>=e&&i<=n[0]&&o.currentValue.push(t.id)}):l.forEach(function(t,i){i<=e&&i>=n[0]&&o.currentValue.push(t.id)});else if(r>=2){var t=Math.max.apply(null,n),i=Math.min.apply(null,n);if(e>=t)l.forEach(function(i,n){n<=e&&n>=t&&o.currentValue.push(i.id)});else if(e>=i&&e<t){var s=[];n.forEach(function(t){t>=i&&t<=e&&s.push(t)});var c=Math.max.apply(null,s);l.forEach(function(t,i){i>=c&&i<=e&&o.currentValue.push(t.id)})}else l.forEach(function(t,n){n>=e&&n<=i&&o.currentValue.push(t.id)})}})}this.controlKeyDown?-1!==this.currentValue.indexOf(t)?this.currentValue.splice(this.currentValue.indexOf(t),1):this.currentValue.push(t):(this.currentValue=[],this.$nextTick(function(){i.currentValue.push(t)}))},detectKey:function(){var t=navigator.userAgent.indexOf("Window")>0,e=navigator.userAgent.indexOf("Mac OS X")>0,i=this;window.onkeydown=function(n){var o=n||window.event;o&&16===o.keyCode&&(i.shiftKeyDown=!0),o&&17===o.keyCode&&t&&(i.controlKeyDown=!0),o&&91===o.keyCode&&e&&(i.controlKeyDown=!0)},window.onkeyup=function(n){var o=n||window.event;o&&16===o.keyCode&&(i.shiftKeyDown=!1),o&&17===o.keyCode&&t&&(i.controlKeyDown=!1),o&&91===o.keyCode&&e&&(i.controlKeyDown=!1)}}},mounted:function(){this.$el.addEventListener("scroll",this.boxScrollFn),this.detectKey()},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.$el.removeEventListener("scroll",this.boxScrollFn)}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-drag-select"},[e("div",{staticClass:"select-wrap",style:{minHeight:this.minHeight+"px"},on:{mousedown:this.onMouseDown}},[e("div",{ref:"selectWrap",staticClass:"wrap-container"},[this._t("default")],2),this._v(" "),this.mouseDown?e("div",{staticClass:"vue-drag-select-box",style:this.selectionBoxStyling}):this._e()])])},staticRenderFns:[]};var c={components:{DragSelect:i("VU/8")(l,r,!1,function(t){i("if5U")},null,null).exports},data:function(){return{mood:!0,minHeight:0,dataList:[{id:"1"},{id:"2"},{id:"3"}],selectedList:[]}},methods:{siteHandle:function(t,e){var i=this.$refs.resultBox.offsetWidth,n=parseInt(i/t),o=0;this.$refs.resultBox.querySelectorAll(".box-item").forEach(function(i,s){s%n||s&&(o+=1),i.style.top=o*e+"px",i.style.left=s%n*t+"px"}),this.minHeight=(o+1)*e},clickItem:function(t,e){this.$refs.dragSelect.clickSelect(t,e)}},created:function(){this.dataList=[];for(var t=1;t<=50;t++)this.dataList.push({id:""+t})},mounted:function(){this.siteHandle(200,230)},watch:{mood:function(){var t=this;clearTimeout(this.timeClick),this.timeClick=setTimeout(function(){t.siteHandle(200,230)},500)},selectedList:function(t){this.dataList.forEach(function(e){-1!==t.indexOf(e.id)?e.selected=!0:e.selected=!1})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["index-page",t.mood?"":"bigger"]},[n("div",{staticClass:"btn",on:{click:function(e){t.mood=!t.mood}}},[t._v(t._s(t.mood?"点击变宽":"点击收缩"))]),t._v(" "),t._m(0),t._v(" "),n("div",{ref:"resultBox",staticClass:"result-box"},[n("drag-select",{ref:"dragSelect",attrs:{"min-height":t.minHeight},model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}},[t._l(t.dataList,function(e,o){return[n("div",{key:e.id,class:["box-item",e.selected?"selected-item":""],attrs:{id:e.id},on:{click:function(i){return t.clickItem(e.id,o)}}},[n("div",{staticClass:"item-self"},[n("img",31!==o?{attrs:{src:i("aUzH")}}:{attrs:{src:i("g5Aq")}})])])]})],2)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[this._v("可以尝试 "),e("code",[this._v("Ctrl")]),this._v(" 和 "),e("code",[this._v("shift")]),this._v(" 按键")])}]};var u={name:"App",components:{ParentCom:i("VU/8")(c,a,!1,function(t){i("9KKc")},null,null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("ParentCom")],1)},staticRenderFns:[]};var d=i("VU/8")(u,h,!1,function(t){i("ijGk")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:d},template:"<App/>"})},aUzH:function(t,e,i){t.exports=i.p+"static/img/0.205521e.jpg"},g5Aq:function(t,e,i){t.exports=i.p+"static/img/prank.ca527c7.jpg"},if5U:function(t,e){},ijGk:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.461bd9115f9120fb0805.js.map